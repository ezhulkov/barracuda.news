@(layoutModel: String, tags: String, langs: String)(implicit user: Account)

@sidebar = {
    <ul>
        <li ng-hide="layoutModel.id">
            <a href="#" ng-click="save()">Create</a>
        </li>
        <li ng-show="layoutModel.id">
            <a href="#" ng-click="save()">Save</a>
        </li>
        <li ng-show="layoutModel.id">
            <a data-remodal-target="delete-modal">Delete</a>
        </li>
    </ul>

}

@layout.admin("layout-section", subMenu = Some(sidebar), activeMenu = Some("#layouts"), controller = Some("LayoutController")) {

    <div>
        <ul class="breadcrumbs">
            <li><a href="@routes.AdminController.layouts">Layouts</a></li>
            <li>{{layoutModel.name}}</li>
        </ul>
        <fieldset>
            <dl class="name">
                <dt><label for="name">Layout name:</label></dt>
                <dd><input type="text" name="name" ng-model="layoutModel.name"></dd>
            </dl>
            <dl class="tag">
                <dt><label for="tag">Page tag (optional):</label></dt>
                <dd>
                    <select chosen
                    ng-model="layoutModel.tag.id"
                    data-placeholder="Choose page tag...">
                        <option value="">&nbsp;</option>
                        <option ng-repeat="option in tags" value="{{option.id}}">{{option.name}}</option>
                    </select>
                </dd>
            </dl>
        </fieldset>
        <h3>Layout config</h3>
        <div class="grid">
            <div class="row" ng-repeat="row in layoutModel.config.rows">
                <div class="block {{block.size}}" ng-repeat="block in row.blocks">
                    <div class="info">
                        <p>News type: {{block.newsType}}</p>
                        <p>Tag: {{block.tag}}</p>
                        <p ng-show="block.featured">Featured block</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="remodal" data-remodal-id="delete-modal">
        <h3>Delete layout?</h3>
        <br>
        <div class="controls">
            <input data-remodal-action="cancel" type="button" value="Cancel">
            <input data-remodal-action="confirm" type="button" value="Delete" ng-click="delete()">
        </div>
    </div>

    <script type="application/javascript">
            var layoutModel = @Html(layoutModel);
            var tags = @Html(tags);
            var langs = @Html(langs);
    </script>

}
