@import "mixins"
@import "compass"
@import "susy"
@import "compass/typography/vertical_rhythm"
@import compass/layout/stretching

$linkColors: (#f6976a, #f26522, #48c4eb, #ee7b0e, #9d34a6)
$delimiter-width: 2px !global
$corporate-lines: 5
$menu-lines: 2

header
  +tablet-media
    .container
      border-left: 1px solid $blackColor3
      border-right: 1px solid $blackColor3
  .corporate
    +background-image(linear-gradient($blackColor1, $blackColor2 25%, $blackColor2 75%, $blackColor1))
    height: rhythm($corporate-lines)
    .container
      line-height: rhythm($corporate-lines)
      text-align: center
      position: relative
      img
        max-width: 90%
        vertical-align: middle
  .menu
    +background-image(linear-gradient($blackColor2, $blackColor2))
    border-top: $delimiter-width solid $blackColor4
    height: rhythm($menu-lines)
    position: relative
    .container
      margin-top: -$delimiter-width
    .menu-button
      +active-link()
      +t-large
      +float-left
      display: block
    ul
      +no-bullet
      height: rhythm($menu-lines)
      li
        +float-left
        +active-link($color: $textColor)
        text-transform: uppercase
        display: block
        position: relative
        cursor: pointer
      a, div
        +t-strong
        +rhythm-padding(($menu-lines - 1)/2)
        text-transform: uppercase
        display: block
        position: relative
    ul.tools
      +float-right
      li
        +pad(15px, 0)
      li.lang > div:after
        +fa
        margin-left: 5px
        content: "\f107"
      li.search > div:after
        +fa
        content: "\f002"
    ul.categories
      display: none
    &.menu-active
      ul.categories
        top: rhythm($menu-lines)
        left: 0
        right: 0
        display: block
        position: absolute
        background-color: $blackColor2
        border-top: 2px solid $blackColor4
        margin-top: -2px
        z-index: 100
        height: auto
        li
          float: none
          text-align: center
    +tablet-media
      .menu-button
        display: none
      ul.tools
        margin-right: 25px
      ul.categories
        +float-left
        display: block
        li
          +pad(15px, 15px)
          border-right: 1px solid $blackColor3
          a
            +active-link($color: $textColor, $hover: white)
            text-transform: uppercase
            z-index: 2
          a:active, a:hover
            background-color: transparent
            outline: none
          @for $i from 1 through length($linkColors)
            &.color#{$i}:after
              background: nth($linkColors, $i)
          &:after
            +transition(all 0.1s)
            cursor: pointer
            position: absolute
            width: 100%
            height: 2px
            left: 0
            top: 0
            content: ''
          &:hover:after
            height: 100%
          &.active a
            color: $activeLink

=overlay
  +stretch()
  +transition(opacity 0.1s ease-in)
  +opacity(0)
  background-color: rgba(black, 0.8)
  z-index: 10
  visibility: hidden
  overflow: auto
  pointer-events: auto

=overlay-active($name)
  main
    +filter(blur(3px))
  .#{$name}
    +opacity(1)
    visibility: visible

.loading-overlay
  +overlay
  background-color: rgba(255, 255, 255, 0.1)
  & > div
    position: absolute
    top: 50%
    left: 50%
    color: $blackTextColor
    transform: translate(-50%, -50%)
.search-overlay
  +overlay
  .search-input, .result
    +span(12)
    +desktop-media
      +span(10)
      +push(1)
    +xdesktop-media
      +span(8)
      +push(2)
  .search-input
    +margin-leader(3)
    position: relative
    &:after
      +fa
      +t-large
      color: $whiteColor
      content: "\f002"
      position: absolute
      top: 0
      right: 0
    input[type="text"]
      +t-large
      width: 100%
      outline: none
      color: white
      position: relative
      border: none
      background-color: transparent
      border-bottom: 1px solid $whiteColor
  .result
    +margin-leader(1)
    color: $whiteColor
    li
      border-bottom: 1px solid $whiteColor
      margin-bottom: -1px
    h2
      line-height: rhythm(3/2)
      a
        +active-link()

.app-wrapper
  &.search-active
    +overlay-active("search-overlay")