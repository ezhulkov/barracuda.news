angular.module("bw.paging",[]).directive("paging",function(){function b(a,b,c){a.$watchCollection("[page,pageSize,total,disabled]",function(){m(a,c)})}function c(a,b){return'<ul data-ng-hide="Hide" data-ng-class="ulClass"> <li title="{{Item.title}}" data-ng-class="Item.liClass" data-ng-repeat="Item in List"> <a '+(b.pgHref?'data-ng-href="{{Item.pgHref}}" ':"href ")+'data-ng-class="Item.aClass" data-ng-click="Item.action()" data-ng-bind="Item.value"></a> </li></ul>'}function d(a,b){a.List=[],a.Hide=!1,a.page=parseInt(a.page)||1,a.total=parseInt(a.total)||0,a.adjacent=parseInt(a.adjacent)||2,a.pgHref=a.pgHref||"",a.dots=a.dots||"...",a.ulClass=a.ulClass||"pagination",a.activeClass=a.activeClass||"active",a.disabledClass=a.disabledClass||"disabled",a.textFirst=a.textFirst||"<<",a.textLast=a.textLast||">>",a.textNext=a.textNext||">",a.textPrev=a.textPrev||"<",a.textFirstClass=a.textFirstClass||"",a.textLastClass=a.textLastClass||"",a.textNextClass=a.textNextClass||"",a.textPrevClass=a.textPrevClass||"",a.textTitlePage=a.textTitlePage||"Page {page}",a.textTitleFirst=a.textTitleFirst||"First Page",a.textTitleLast=a.textTitleLast||"Last Page",a.textTitleNext=a.textTitleNext||"Next Page",a.textTitlePrev=a.textTitlePrev||"Previous Page",a.hideIfEmpty=e(a,b.hideIfEmpty),a.showPrevNext=e(a,b.showPrevNext),a.showFirstLast=e(a,b.showFirstLast),a.scrollTop=e(a,b.scrollTop),a.isDisabled=e(a,b.disabled)}function e(a,b){return!!angular.isDefined(b)&&!!a.$parent.$eval(b)}function f(a,b){a.page>b&&(a.page=b),a.page<=0&&(a.page=1),a.adjacent<=0&&(a.adjacent=2),b<=1&&(a.Hide=a.hideIfEmpty)}function g(a,b){a.page!=b&&(a.isDisabled||(a.page=b,a.pagingAction({page:a.page,pageSize:a.pageSize,total:a.total}),a.scrollTop&&scrollTo(0,0)))}function h(b,c,d){if(!(!b.showPrevNext&&!b.showFirstLast||c<1)){var e,f,h;if("prev"===d){e=b.page-1<=0;var i=b.page-1<=0?1:b.page-1;b.showFirstLast&&(f={value:b.textFirst,title:b.textTitleFirst,aClass:b.textFirstClass,page:1}),b.showPrevNext&&(h={value:b.textPrev,title:b.textTitlePrev,aClass:b.textPrevClass,page:i})}else{e=b.page+1>c;var j=b.page+1>=c?c:b.page+1;b.showPrevNext&&(f={value:b.textNext,title:b.textTitleNext,aClass:b.textNextClass,page:j}),b.showFirstLast&&(h={value:b.textLast,title:b.textTitleLast,aClass:b.textLastClass,page:c})}var k=function(c,d){return{title:c.title,aClass:c.aClass,value:c.aClass?"":c.value,liClass:d?b.disabledClass:"",pgHref:d?"":b.pgHref.replace(a,c.page),action:function(){d||g(b,c.page)}}};if(b.isDisabled&&(e=!0),f){var l=k(f,e);b.List.push(l)}if(h){var m=k(h,e);b.List.push(m)}}}function i(b,c,d){var e=0;for(e=b;e<=c;e++){var f=d.pgHref.replace(a,e),h=d.page==e?d.activeClass:"";d.isDisabled&&(f="",h=d.disabledClass),d.List.push({value:e,title:d.textTitlePage.replace(a,e),liClass:h,pgHref:f,action:function(){g(d,this.value)}})}}function j(a){a.List.push({value:a.dots,liClass:a.disabledClass})}function k(a,b){i(1,2,a),3!=b&&j(a)}function l(a,b,c){c!=a-2&&j(b),i(a-1,a,b)}function m(a,b){(!a.pageSize||a.pageSize<=0)&&(a.pageSize=1);var c=Math.ceil(a.total/a.pageSize);d(a,b),f(a,c);var e,g,j=2*a.adjacent+2;h(a,c,"prev"),c<=j+2?(e=1,i(e,c,a)):a.page-a.adjacent<=2?(e=1,g=1+j,i(e,g,a),l(c,a,g)):a.page<c-(a.adjacent+2)?(e=a.page-a.adjacent,g=a.page+a.adjacent,k(a,e),i(e,g,a),l(c,a,g)):(e=c-j,g=c,k(a,e),i(e,g,a)),h(a,c,"next")}var a=/\{page\}/g;return{restrict:"EA",link:b,template:c,scope:{page:"=",pageSize:"=",total:"=",disabled:"@",dots:"@",ulClass:"@",activeClass:"@",disabledClass:"@",adjacent:"@",pagingAction:"&",pgHref:"@",textFirst:"@",textLast:"@",textNext:"@",textPrev:"@",textFirstClass:"@",textLastClass:"@",textNextClass:"@",textPrevClass:"@",textTitlePage:"@",textTitleFirst:"@",textTitleLast:"@",textTitleNext:"@",textTitlePrev:"@"}}});